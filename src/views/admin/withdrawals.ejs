<div class="section-title">Withdrawal Requests</div>

<div class="glass-panel" style="overflow-x:auto;">
  <table style="width:100%;border-collapse:collapse;color:white;">
    <thead>
      <tr style="text-align:left;color:#94a3b8;border-bottom:1px solid rgba(255,255,255,0.1);">
        <th style="padding:12px;">User</th>
        <th style="padding:12px;">Amount</th>
        <th style="padding:12px;">Method</th>
        <th style="padding:12px;">Details</th>
        <th style="padding:12px;">Status</th>
        <th style="padding:12px;">Date</th>
        <th style="padding:12px;">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% withdrawals.forEach(w => { %>
        <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
          <td style="padding:12px;">
            <div><%= w.user.username %></div>
            <div style="font-size:12px;color:#94a3b8;"><%= w.user.email %></div>
          </td>
          <td style="padding:12px;"><%= w.amount %></td>
          <td style="padding:12px;"><%= w.method %></td>
          <td style="padding:12px;"><%= w.details %></td>
          <td style="padding:12px;">
            <% if (w.status === 'PENDING') { %>
              <span style="background:rgba(234,179,8,0.2);color:#facc15;padding:4px 8px;border-radius:4px;font-size:12px;">PENDING</span>
            <% } else if (w.status === 'APPROVED') { %>
              <span style="background:rgba(34,197,94,0.2);color:#4ade80;padding:4px 8px;border-radius:4px;font-size:12px;">APPROVED</span>
            <% } else { %>
              <span style="background:rgba(239,68,68,0.2);color:#f87171;padding:4px 8px;border-radius:4px;font-size:12px;">REJECTED</span>
            <% } %>
          </td>
          <td style="padding:12px;"><%= new Date(w.createdAt).toLocaleDateString() %></td>
          <td style="padding:12px;">
            <% if (w.status === 'PENDING') { %>
              <div style="display:flex;gap:8px;">
                <form action="/admin/withdrawals/approve" method="POST" style="display:inline;">
                  <input type="hidden" name="id" value="<%= w.id %>">
                  <button type="submit" class="btn-premium" style="background:rgba(34,197,94,0.2);color:#4ade80;border-color:rgba(34,197,94,0.3);padding:4px 8px;font-size:12px;">Approve</button>
                </form>
                <form action="/admin/withdrawals/reject" method="POST" style="display:inline;">
                  <input type="hidden" name="id" value="<%= w.id %>">
                  <button type="submit" class="btn-premium" style="background:rgba(239,68,68,0.2);color:#f87171;border-color:rgba(239,68,68,0.3);padding:4px 8px;font-size:12px;">Reject</button>
                </form>
              </div>
            <% } %>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>
  <% if (withdrawals.length === 0) { %>
    <div style="padding:20px;text-align:center;color:#94a3b8;">No withdrawal requests found.</div>
  <% } %>
</div>
